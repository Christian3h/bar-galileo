{% extends 'base_admin.html' %}
{% block content %}
{% load static %}
{% load roles_tags %}

<h1>Lista de marcas</h1>

<div class="table-contenedor">
    <div class="table-responsive">
        <table id="brands-table" class="table display">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for brand in brands %}
                <tr>
                    <td>{{ brand.marca }}</td>
                    <td>
                        {% if request.user|has_perm:"brands,editar" %}
                        <a href="{% url 'products:brands_update_admin' brand.id_marca %}" class="btn btn-sm btn-warning"><img src="{% static 'img/icons/edit.svg' %}" alt="Editar"></a>
                        {% endif %}
                        {% if request.user|has_perm:"brands,eliminar" %}
                        <a href="{% url 'products:brands_delete_admin' brand.id_marca %}" class="btn btn-sm btn-danger"><img src="{% static 'img/icons/delete.svg' %}" alt="Eliminar"></a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
$(document).ready(function() {
    var sel = '#brands-table';
    if (!$(sel).length) return;
    if ($.fn.dataTable.isDataTable(sel)) {
        $(sel).DataTable().destroy();
    }
    $(sel).DataTable({
        language: {
            url: "{% static 'js/DataTables/es-ES.json' %}"
        },
        columnDefs: [
            { targets: '_all', defaultContent: '' }
        ],
        responsive: true
    });
});
</script>

{% endblock %}
