{%load static%}
{% load roles_tags %}
<header class="layout">
    <div class="header-content">
        <nav id="sidebar" class="sidebar expanded">
            <ul class="menu">
                <a href="{% url 'admin_dashboard:dashboard' %}">
                    <img src="{% static 'img/favicon/apple-touch-icon.png' %}" alt="Bar Galileo">
                </a>
                <li>
                    <button class="menu-btn" id="home-page-btn" data-url="{% url 'core:index' %}">
                        <img src="{% static 'img/icons/home.svg' %}" alt="Página Principal">
                        Página Principal
                    </button>
                </li>

                {% if request.user|has_perm:"products,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('productos-submenu')"><img src="{% static 'img/icons/shopping_basket.svg' %}" alt="Productos"> Productos</button>
                    <ul id="productos-submenu" class="submenu hidden">
                        <li><a href="{% url 'products:products_admin' %}">Lista de productos</a></li>
                        {% if request.user|has_perm:"products,crear" %}
                        <li><a href="{% url 'products:products_create_admin' %}">Crear producto</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"categories,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('categorias-submenu')"><img src="{% static 'img/icons/bar_chart.svg' %}" alt="Categorías"> Categorías</button>
                    <ul id="categorias-submenu" class="submenu hidden">
                        <li><a href="{% url 'products:categories_admin' %}">Lista de categorías</a></li>
                        {% if request.user|has_perm:"categories,crear" %}
                        <li><a href="{% url 'products:categories_create_admin' %}">Crear categoría</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"brands,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('brands-submenu')"><img src="{% static 'img/icons/shopping_basket.svg' %}" alt="Marcas"> Marcas</button>
                    <ul id="brands-submenu" class="submenu hidden">
                        <li><a href="{% url 'products:brands_admin' %}">Lista de Marcas</a></li>
                        {% if request.user|has_perm:"brands,crear" %}
                        <li><a href="{% url 'products:brands_create_admin' %}">Crear Marca</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"providers,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('Proveedores-submenu')"><img src="{% static 'img/icons/group.svg' %}" alt="Proveedores"> Proveedores</button>
                    <ul id="Proveedores-submenu" class="submenu hidden">
                        <li><a href="{% url 'products:proveedores_admin' %}">Listar proveedores</a></li>
                        {% if request.user|has_perm:"providers,crear" %}
                        <li><a href="{% url 'products:proveedores_create_admin' %}">Crear proveedor</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"tables,ver" %}
                {% if request.user|has_perm:"tables,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('mesas-submenu')"><img src="{% static 'img/icons/table.svg' %}" alt="Mesas"> Mesas</button>
                    <ul id="mesas-submenu" class="submenu hidden">
                        <li><a href="{% url 'tables:mesas_lista' %}">Lista de Mesas</a></li>
                        {% if request.user|has_perm:"tables,crear" %}
                        <li><a href="{% url 'tables:crear_mesa' %}">Crear Mesa</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}
                {% endif %}

                {% if request.user|has_perm:"users,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('usuarios-submenu')"><img src="{% static 'img/icons/group.svg' %}" alt="Usuarios"> Usuarios</button>
                    <ul id="usuarios-submenu" class="submenu hidden">
                        <li><a href="{% url 'users:user_list' %}">Lista de usuarios</a></li>
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"roles,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('roles-submenu')"><img src="{% static 'img/icons/group_add.svg' %}" alt="Roles y Permisos"> Roles y Permisos</button>
                    <ul id="roles-submenu" class="submenu hidden">
                        <li><a href="{% url 'roles:rol_list' %}">Lista de roles</a></li>
                        {% if request.user|has_perm:"roles,crear" %}
                        <li><a href="{% url 'roles:rol_create' %}">Crear rol</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"facturacion,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('facturacion-submenu')"><img src="{% static 'img/icons/attach_money.svg' %}" alt="Facturación"> Facturación</button>
                    <ul id="facturacion-submenu" class="submenu hidden">
                        <li><a href="{% url 'facturacion:lista_facturas' %}">Lista de facturas</a></li>
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"expenses,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('gastos-submenu')"><img src="{% static 'img/icons/payments.svg' %}" alt="Gastos"> Gastos</button>
                    <ul id="gastos-submenu" class="submenu hidden">
                        <li><a href="{% url 'expenses:expense_list' %}">Lista de Gastos</a></li>
                        {% if request.user|has_perm:"expenses,crear" %}
                        <li><a href="{% url 'expenses:expense_create' %}">Crear Gasto</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"nominas,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('nominas-submenu')"><img src="{% static 'img/icons/group.svg' %}" alt="Nóminas"> Nóminas</button>
                    <ul id="nominas-submenu" class="submenu hidden">
                        <li><a href="{% url 'nominas:empleado_list' %}">Lista de Empleados</a></li>
                        {% if request.user|has_perm:"nominas,crear" %}
                        <li><a href="{% url 'nominas:empleado_crear' %}">Registrar Empleado</a></li>
                        {% endif %}
                        <li><a href="{% url 'nominas:pago_list' %}">Lista de Pagos</a></li>
                        {% if request.user|has_perm:"nominas,crear" %}
                        <li><a href="{% url 'nominas:pago_crear' %}">Registrar Pago</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"backups,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('backups-submenu')"><img src="{% static 'img/icons/backup.svg' %}" alt="Backups"> Backups</button>
                    <ul id="backups-submenu" class="submenu hidden">
                        <li><a href="{% url 'backups:backup_list' %}">Gestión de Backups</a></li>
                    </ul>
                </li>
                {% endif %}

                {% if request.user|has_perm:"reportes,ver" %}
                <li>
                                        <button class="menu-btn" onclick="toggleMenu('reportes-submenu')"><img src="{% static 'img/icons/bar_chart.svg' %}" alt="Reportes"> Reportes</button>
                    <ul id="reportes-submenu" class="submenu hidden">
                        <li><a href="{% url 'reportes:reporte_list' %}">Lista de Reportes</a></li>
                        {% if request.user|has_perm:"reportes,crear" %}
                        <li><a href="{% url 'reportes:reporte_create' %}">Crear Reporte</a></li>
                        {% endif %}
                    </ul>
                </li>
                {% endif %}

                <!-- Chat RAG con Documentos -->
                <li>
                    <button class="menu-btn" onclick="window.location.href='{% url 'rag_chat:chat' %}'">
                        <img src="{% static 'img/icons/group.svg' %}" alt="Chat RAG">
                        Chat con Documentos
                    </button>
                </li>


                <!-- {% if request.user|has_perm:"dashboard,ver" %}
            <li>
                <button class="menu-btn" onclick="toggleMenu('ajustes-submenu')">Ajustes</button>
                <ul id="ajustes-submenu" class="submenu hidden">
                    <li><a href="#">Crear</a></li>
                    <li><a href="#">Listar</a></li>
                </ul>
            </li>
            {% endif %} -->
            <!-- Comentario de prueba -->
            </ul>
        </nav>
</header>